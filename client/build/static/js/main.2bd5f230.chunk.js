(this["webpackJsonpmovie-app1"]=this["webpackJsonpmovie-app1"]||[]).push([[0],{101:function(e,t){e.exports="data:image/jpeg;base64,/9j/2wCEAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRQBAwQEBQQFCQUFCRQNCw0UFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFP/AABEIAGQAZAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AP1TooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAKup6naaLp1zf39zFZWVtG009xO4SOJFGWZmPAAHJJrN0jxz4d1/wAPz67pmu6dqGiwCRpdQtrpJIIwgy+5wcDaOTk8Vy/7RX/JBfiH/wBgC9/9EtXwp+xx8Sfsvw1+MHgS5lxHdeHr3VrJCeN627RzAe5UxH/gJrza+L9hXjSa0af3n3+TcL/2vlFfMYTfNSnFNf3Xa79Ve/omfoTZfEzwlqPhi68R2vibSbnQLVik+qRXsbW0TDGQ0gO0H5l6nuPWsQ/tC/DAZz8QvDAx/wBRaD/4qvi74Qj/AI1yfEn/AK/5/wCdrWj+zh+y18Ivid8JvDmseI9Smj8SaiZkltotYSElhPIiARdQSqrx36965Vja9RwjTiruPNq/Ox9FV4RynAQxVbHV6nLSrOkuSKbdo812rq3X8D7S174v+B/C1zBb6x4v0PS554FuYo7zUIomkibO11DMMqcHB6HFR6H8aPAPibVbfTNJ8aaDqeo3BKw2lpqMUsshAJIVQ2TwCfwrwv8Aa1/Zq8G6t8Odc8Z3CX51nw74d+z2JW7IjCQKxj3rj5jljn1ri/2Ev2fPCWp+EPDvxMmS9/4Se0vbtY2W5IgwrPEMx4/use/WtniMQsQqHKrPXd7X/M8inkmRzyKebOvU5ovktyxtzuLklv8ADpq9/I+nrj4+fDWzuJYJ/H3huGeJzHJG+qwhkYHBBG7gggirzfGDwMnhweIG8X6GNDNx9kGpHUIvs/nYz5fmbsbsc4zmvzx+Avwn+HXxS+JnxMi+IOqLpkNlfs1mx1NLLezXE4f733sBV6dM+9eo/tffC3wv8Jf2SdO0nwhLLcaLc+JYb+OaW5Fx5he3lG5XHBUhRjFc8MdXlRlXcVZJ9ddD28TwflFHM6GUxrVfazlBNuK5bSjzaO+rV10PuWyvbfUrKC7tJ47m1uI1limiYMkiMMqykcEEEEGsdfH3hpvFbeGBr+mnxGq7zpIuk+1Bdu/Pl53Y2nd06c1n/CD/AJJJ4K/7Adj/AOk6V8oWoB/4Ke3f/Xgf/TatejWxDpxptL4ml958TleSU8fWx1OU2vYU6k15uDSSfk7n17pHxD8L6/r95oem+IdMv9ast/2nT7e7R54drBW3oDlcMQDkcEikt/iJ4Xu/FMnhqDxFpc3iGLO/So7tGuUwu45jB3DAIPTvXxP+0zNc/szftYaB8UdOtGn0vW4He7tozsE0ip5U8eemWUwyc/xAmuq/4J9eBb3XZ/F3xb18efq2u3UttbTOOWXfvuJB7NJtQe0RFckMbOVf6vy+8m7+nR/M+hxPCeEw+T/237dulKnFxWl3Vk2pQ9IWbb6rbY+0KKKK9g/Lzzv9or/kgvxD/wCwBe/+iWr8urPRrzwD8NfB3xF0lTnUJ9W0K+BztOYygB/3opZB/wBsxX6qfGzQr7xP8IPGmkaXbNeajfaPdW1tboQDJI8TKqgkgDJI6mvmvwb+yr4n1n9ji/8Ah9rthBpHik6lJqVgtzcI6RyB1KFmj3Abl3qcZI3V8/mGHnXqrkW0XZ+aaZ+28E55hcny2SxNRJTrxUotq7hKEoydt2otpv0PN/hGu3/gnL8Sl641C4H62tdJ+yJ+yF4T8V+DfA/xPu9S1ePW47w3y20TRC3LwXLhBgxliD5Yz83rjFelfDn9lPxF4f8A2WfFPwx1TVtNi1XWbuWdLu18yaGJWMJAOVUk/uj09RXnum/8E3tZWyS1u/ivdw2qAhbazsZBGuSScKZ8Dkk9K51hqsXSk6XNaKVrpWdz3a3EGXVqeYUKWZfV3UxEpcyhKfNBwUbaLZvz6H0n+1F/ybx8Q/8AsC3P/oFcD+wD/wAm26T/ANhC9/8AR5r17xR8NoPFXwpvfA9zfTR211pY0x7yNR5m3ywhcA5GeM1T+CXwisfgj4AtfCun39zqNtBNLMLi7VQ5Mj7iCFAHU17LpTeKVW2nLb53PymOY4Wnw7Vy1SvUdZTWj1iotX+/pufBf7O37Onhf9oT4n/E+38TXGowJpV+0kB06ZIyTJcTht25Gz9wYxjvXtH7eXhKy8Bfsn+F/DmnPNJYaVqdnZwNcMGkKJbzKpYgAE4HYCvbvgv+zhonwS8S+KtZ0vVNQv5/EMolnjvPL2RESSP8m1Qesh656CtD9oH4HWPx/wDBEHhu/wBTudJhhvo74T2qK7FkR1CkNxj5yfwFcFPAuGElBR99p/nofZ4rjCnieJcNiZVpPCUpQaTT0aglJpb73Nz4POr/AAk8FbSGxolkODn/AJd0r5StP+Unt3/14H/02pW54O/4J42vgrxjoeu2XxC1N10y+gvPsslmoWYRyB9hKyDAOMdD16V6Sn7Nl5F+1W/xdXXYGtJLcwNpZtmEi/6KIciTdg8jd09q0nGvWjTUqduWUXunoupw4bEZLlmIx88PjPaqvQqxXuSjacnFqOt73110R4b/AMFJ/HUF+/hLwHZWy3mqCRtXmMab5Yk2tHGi45+b94xHogr2r9hnxvY+MP2d/D9taxxQXGiF9MuoYhgb0O5Xx/to6sT3JasfwX+zF4iP7TuvfFLxrqGlapbSLKNLs7RpGaHcvlRq4dAMLDuHGcsxNYn7MXwU8cfAD40+MtLfSGl+HWsF3sdQjuYnEbRuWg3pu3qTG7IeOqr2rKnGvHF+3lHSTa9ErWfzPRx1fKcRwysmw9ZOpQjGre9lOcnL2kFe13FNWtq+2jPrOiiivfPxUKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Z"},107:function(e,t,a){e.exports=a(239)},112:function(e,t,a){},239:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(100),o=a.n(c),s=(a(112),a(1)),i=a(13),l=a(3),u=a.n(l),m=a(2),p=a.n(m),g=a(20),d=a(4),f=a(17);var h=function(e){var t=e.handleInput,a=e.search,n=e.clearSearch;return""===e.s?r.a.createElement("button",{id:"clear",type:"reset",className:"hidden",onClick:n}):r.a.createElement("button",{id:"clear",type:"reset",className:"clearSearch",onClick:n}),r.a.createElement("section",{className:"searchbox-wrap"},r.a.createElement("form",{id:"searchForm"},r.a.createElement("input",{type:"search",placeholder:"Search for a moive...",className:"searchbox",onChange:t,onKeyUp:a}),r.a.createElement("button",{id:"clear",type:"reset",className:"clearSearch",onClick:n})))};var v=function(e){var t=e.category,a=e.handleCategoryChange,n="";return"popular"===t?n="Popularity":"top_rated"===t?n="Top Rated":"now_playing"===t&&(n="Now Playing"),r.a.createElement("div",{className:"categories"},r.a.createElement("a",{href:"/#",name:"popular",className:"Popularity"===n?"activeCategory":"",onClick:function(e){return a(e.currentTarget.name)}},"Popularity"),r.a.createElement("a",{href:"/#",name:"top_rated",className:"Top Rated"===n?"activeCategory":"",onClick:function(e){return a(e.currentTarget.name)}},"Top Rated"),r.a.createElement("a",{href:"/#",name:"now_playing",id:"nowPlaying",className:"Now Playing"===n?"activeCategory":"",onClick:function(e){return a(e.currentTarget.name)}},"Now Playing"))},E=a(31),b=a.n(E);var y=function(e){var t=e.result,a=e.openPopup,n=(e.user,t.poster_path),c="";c=null===n?b.a:"https://image.tmdb.org/t/p/w200/".concat(n);var o=t.original_title,s="";return s=o.length>50?o.substring(0,15)+"...":o,r.a.createElement("div",{className:"result",onClick:function(){return a(t.id)}},r.a.createElement("img",{src:c,alt:"Movie Poster"}),r.a.createElement("div",null,r.a.createElement("h3",null,s)))};var w=function(e){var t,a=e.results,n=e.openPopup,c=e.user;return e.handlePageChange,e.page,e.pages,t=0===a.length?r.a.createElement("section",{className:"results"},r.a.createElement("h1",null,"No movies found!")):r.a.createElement("section",{className:"results"},a.map((function(e){return r.a.createElement(y,{key:e.id,user:c,result:e,openPopup:n})}))),r.a.createElement("section",{className:"results"},t)},A=a(101),k=a.n(A),N=(a(131),a(241)),x=a(12),O="523e9d0683b307c83c56fc95d6c14367";var S=function(e){var t,a=e.selected,c=e.closePopup,o=e.changeSelected,l=e.user,m=(e.onNetflix,Object(n.useState)({similar:[],videos:[],cast:[],videosLoading:!0,value:0,rating:0,rated:!1})),g=Object(i.a)(m,2),f=g[0],h=g[1];function v(){return(v=Object(d.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()("https://api.themoviedb.org/3/movie/".concat(t.id,"/similar?api_key=").concat(O,"&language=en-US&page=1"));case 2:return n=e.sent,e.next=5,n.data.results;case 5:r=e.sent,h((function(e){return Object(s.a)({},e,{similar:r})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(d.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()("https://api.themoviedb.org/3/movie/".concat(t.id,"/credits?api_key=").concat(O));case 2:return n=e.sent,e.next=5,n.data.cast;case 5:r=e.sent,h((function(e){return Object(s.a)({},e,{cast:r})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u()("https://api.themoviedb.org/3/movie/".concat(t.id,"/videos?api_key=").concat(O,"&language=en-US&page=1"));case 2:return a=e.sent,e.next=5,a.data.results;case 5:n=e.sent,h((function(e){return Object(s.a)({},e,{videos:n,videosLoading:!1})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(n),h((function(e){return Object(s.a)({},e,{rating:n.rating,rated:!0})})),t.preventDefault(),u.a.post("/users/".concat(l._id,"/ratings"),{rating:n.rating,selectedRate:a.original_title,rated:!0,id:a.id});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(e,t){v.apply(this,arguments)}(a),function(e){y.apply(this,arguments)}(a),function(e,t){E.apply(this,arguments)}(a),l&&u.a.get("users/".concat(l._id,"/ratings")).then((function(e){var t=e.data,n=[];t.forEach((function(e,r){n.push(e.id);var c=t[r].id;c===a.id?h((function(t){return Object(s.a)({},t,{rating:e.rating,rated:!0})})):a.id})),n.includes(a.id)||(console.log("true"),h((function(e){return Object(s.a)({},e,{rating:0,rated:!0})})))}))}),[a]);var S=a.poster_path,j=a.release_date.slice(0,4),C="";C=null===S?b.a:"https://image.tmdb.org/t/p/w200/".concat(S);var B,K=a.genres,T=a.runtime,P=f.cast;t=l?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Your Rating"),r.a.createElement(N.a,{onRate:w,maxRating:5,rating:f.rating,icon:"star",size:"large"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(x.b,{className:"popupLogin",to:"/login"},"Login to rate"),r.a.createElement(N.a,{onRate:w,maxRating:5,rating:f.rating,icon:"star",size:"large",disabled:!0}));var F,U=f.videos;return 0===f.videos.length&&(B=r.a.createElement("h5",{className:"noVideos"},"(",a.original_title," has no videos)")),F=!0===f.onNetflix?r.a.createElement("img",{className:"netflix",src:k.a}):"",U=f.videos.slice(0,5),document.getElementsByTagName("body")[0].classList.add("noscroll"),r.a.createElement("section",{className:"popup"},r.a.createElement("div",{className:"content"},r.a.createElement("h2",null,a.original_title,r.a.createElement("span",null," (",j,")")),r.a.createElement("p",{className:"apiRating"},"Rating: ",a.vote_average,"/10"),r.a.createElement("p",null,K.map((function(e,t){return r.a.createElement("span",{className:"genre movie-info",key:t},e.name," ")}))),r.a.createElement("span",{className:"movie-info"},function(e){var t=e/60,a=Math.floor(t),n=60*(t-a);return a+"h "+Math.round(n)+"m"}(T)),r.a.createElement("div",{className:"streaming"},F),r.a.createElement("div",{className:"movieRating"},t),r.a.createElement("div",{className:"plot"},r.a.createElement("img",{className:"poster",src:C,alt:"Movie Poster"}),r.a.createElement("p",{className:"summary"},a.overview),r.a.createElement("h3",{className:"cast"},"Cast:"),r.a.createElement("div",{className:"cast-info"},P.map((function(e,t){return r.a.createElement("div",{key:t,className:"info"},r.a.createElement("img",{className:"actorImg",alt:e.name,src:null===e.profile_path?b.a:"https://image.tmdb.org/t/p/w200/"+e.profile_path}),r.a.createElement("p",{key:t,className:"actor"},e.name.slice(0,15)),r.a.createElement("p",{className:"actor-role"},e.character.slice(0,15)))}))),r.a.createElement("h3",{className:"videos"},a.original_title," Videos:"),r.a.createElement("div",{className:"scrolling-wrapper-video"},B,U.map((function(e,t){return r.a.createElement("iframe",{key:t,className:"card-video",width:"320",height:"215",allowFullScreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen",title:"Movie Video",frameBorder:"0",src:"https://www.youtube.com/embed/"+e.key})})))),r.a.createElement("h3",{className:"similar-movies"},"Similar Moives:"),r.a.createElement("div",{className:"scrolling-wrapper"},f.similar.map((function(e,t){return r.a.createElement("img",{onClick:function(){return o(e.id)},key:t,className:"card",src:"https://image.tmdb.org/t/p/w200/"+e.poster_path,alt:e.original_title})}))),r.a.createElement("button",{className:"close",onClick:c},"close")))};var j=function(e){var t=e.genres,a=e.handleGenreChange,n=e.genre;return e.genrePageChange,e.pages,r.a.createElement("div",{className:"genres"},r.a.createElement("h3",null,"Genres:"),t.map((function(e,t){return r.a.createElement("li",{key:t,name:e.id,className:n===e.id?"activeGenre":"",onClick:function(t){return a(e.id)}},e.name)})))};var C=function(e){for(var t=e.page,a=e.pages,n=e.handlePageChange,c=[],o=1;o<a;o++)c.push(o);return c=c.slice(0,10),r.a.createElement("div",{className:"btnSection"},c.map((function(e,a){return r.a.createElement("button",{id:"pageBtn",className:t===e?"active":"",key:a,page:t,onClick:function(){return n(e)}},e)})))},B=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_KEY;var K=function(e){var t=e.user,a=e.liftToken,c=Object(n.useState)({s:"",results:[],selected:{},page:1,category:"popular",pages:[],genres:[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],genre:0,rating:0,onNetflix:!1}),o=Object(i.a)(c,2),l=o[0],m=o[1],g="https://api.themoviedb.org/3/search/movie?api_key=".concat(B,"&language=en-US&page=1&include_adult=false");function f(){return(f=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==l.s){e.next=10;break}return e.next=3,u()("https://api.themoviedb.org/3/movie/".concat(l.category,"?api_key=").concat(B,"&language=en-US&page=").concat(l.page));case 3:return a=e.sent,e.next=6,a.data.results;case 6:n=e.sent,m((function(e){return Object(s.a)({},e,{results:n})})),e.next=12;break;case 10:return e.next=12,u()(g+"&query="+l.s+"&page="+l.page).then((function(e){var t=e.data,a=t.results,n=t.total_pages;m((function(e){return Object(s.a)({},e,{results:a,pages:n,page:1,genre:0})}))}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(d.a)(p.a.mark((function e(t){var a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,document.getElementById("searchForm").value="",e.next=4,u()("https://api.themoviedb.org/3/movie/".concat(l.category,"?api_key=").concat(B,"&language=en-US&page=").concat(l.page));case 4:return n=e.sent,e.next=7,n.data.results;case 7:r=e.sent,m((function(e){return Object(s.a)({},e,{results:r})})),m((function(e){return Object(s.a)({},e,{s:a,page:1,category:l.category,genre:l.genre})}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,a,n){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(p.a.mark((function e(t,a,n,r){var c,o,i,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==l.s||0!==l.genre){e.next=8;break}return e.next=3,u()("https://api.themoviedb.org/3/movie/".concat(l.category,"?api_key=").concat(B,"&language=en-US&page=").concat(t));case 3:return c=e.sent,e.next=6,c.data.results;case 6:o=e.sent,m((function(e){return Object(s.a)({},e,{results:o})}));case 8:if(!(l.genre>0)){e.next=16;break}return e.next=11,u()("https://api.themoviedb.org/3/discover/movie?api_key=".concat(B,"&language=en-US&with_genres=").concat(l.genre,"&include_adult=false&page=").concat(t));case 11:return i=e.sent,e.next=14,i.data.results;case 14:d=e.sent,m((function(e){return Object(s.a)({},e,{results:d})}));case 16:l.s.length>0&&u()(g+"&query="+l.s+"&page="+t).then((function(e){var t=e.data.results;m((function(e){return Object(s.a)({},e,{results:t,genre:0})}))})),m((function(e){return Object(s.a)({},e,{page:t})}));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m((function(e){return Object(s.a)({},e,{category:t})})),e.next=3,u()("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(B,"&language=en-US&page=").concat(l.page));case 3:return a=e.sent,e.next=6,a.data.results;case 6:n=e.sent,m((function(e){return Object(s.a)({},e,{results:n,genre:0})}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(d.a)(p.a.mark((function e(a,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u()("https://api.themoviedb.org/3/movie/".concat(a,"?api_key=").concat(B,"&language=en-US")).then((function(e){var a=e.data;m((function(e){return Object(s.a)({},e,{onNetflix:!1})})),t&&u.a.get("users/".concat(t._id,"/ratings")).then((function(e){e.data.forEach((function(e,t){e.id===a.id?(console.log("from Main rated movie:",l.rating),console.log("Selected movie:",l.selected.id),m((function(e){return Object(s.a)({},e,{rating:l.rating})}))):e.id!==a.id&&m((function(e){return Object(s.a)({},e,{rating:0})}))}))})),m((function(e){return Object(s.a)({},e,{selected:a})}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(d.a)(p.a.mark((function e(t,a){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m((function(e){return Object(s.a)({},e,{genre:t})})),e.next=3,u()("https://api.themoviedb.org/3/discover/movie?api_key=".concat(B,"&language=en-US&with_genres=").concat(t,"&include_adult=false&page=").concat(a));case 3:return n=e.sent,e.next=6,n.data.results;case 6:r=e.sent,c=n.data.total_pages,m((function(e){return Object(s.a)({},e,{results:r,pages:c,page:1,category:""})}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(d.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.genre>0)){e.next=8;break}return e.next=3,u()("https://api.themoviedb.org/3/discover/movie?api_key=".concat(B,"&language=en-US&sort_by=").concat(l.category,"&with_genres=").concat(t,"&include_adult=false&page=").concat(a));case 3:return n=e.sent,e.next=6,n.data.results;case 6:r=e.sent,m((function(e){return Object(s.a)({},e,{results:r})}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==l.s){e.next=11;break}return e.next=3,u()("https://api.themoviedb.org/3/movie/popular?api_key=".concat(B,"&language=en-US"));case 3:return t=e.sent,e.next=6,t.data.total_pages;case 6:return a=e.sent,e.next=9,t.data.results;case 9:n=e.sent,m((function(e){return Object(s.a)({},e,{results:n,pages:a,rating:l.rating})}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),b(l.page)}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"container"},r.a.createElement("main",null,r.a.createElement(h,{handleInput:function(e){var t=e.target.value;m((function(e){return Object(s.a)({},e,{s:t})}))},search:function(e){return f.apply(this,arguments)},clearSearch:function(e){return E.apply(this,arguments)},s:l.s}),r.a.createElement("div",{className:"sideBar"},r.a.createElement(v,{category:l.category,handleCategoryChange:function(e){return A.apply(this,arguments)}}),r.a.createElement(j,{genrePageChange:function(e,t){return x.apply(this,arguments)},genre:l.genre,page:l.page,pages:l.pages,genres:l.genres,handleGenreChange:function(e,t){return N.apply(this,arguments)}})),r.a.createElement(w,{s:l.s,results:l.results,openPopup:function(e){u()("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(B,"&language=en-US")).then((function(e){var t=e.data;m((function(e){return Object(s.a)({},e,{selected:t})}))}))},user:t}),r.a.createElement(C,{page:l.page,pages:l.pages,handlePageChange:b}),"undefined"!=typeof l.selected.original_title&&r.a.createElement(S,{liftToken:a,user:t,selected:l.selected,closePopup:function(){m((function(e){return Object(s.a)({},e,{selected:{}})})),document.getElementsByTagName("body")[0].classList.remove("noscroll")},changeSelected:function(e,t,a){return k.apply(this,arguments)},onNetflix:l.onNetflix}))))};var T=function(e){var t=e.liftToken,a=(e.onLoginClick,e.user,e.changeTitle),c=Object(f.e)(),o=Object(n.useState)({email:"",password:"",message:""}),l=Object(i.a)(o,2),m=l[0],h=l[1];function v(){return(v=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.name,n=t.target.value,h((function(e){return Object(s.a)({},e,Object(g.a)({},a,n))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.name,n=t.target.value,h((function(e){return Object(s.a)({},e,Object(g.a)({},a,n))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(d.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),u.a.post("/auth/login",{email:m.email,password:m.password}).then((function(e){"error"===e.data.type?h((function(t){return Object(s.a)({},t,{message:e.data.message})})):(localStorage.setItem("mernToken",e.data.token),t(e.data),c.push("/"),a())})).catch((function(e){h((function(e){return Object(s.a)({},e,{message:"Max login attempts exceeded. Please try again later."})}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.push("/");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null),r.a.createElement("section",{className:"popup"},r.a.createElement("div",{id:"loginPopup",className:"content"},r.a.createElement("div",{className:"Login"},r.a.createElement("h3",null,"Log into your account"),r.a.createElement("form",{onSubmit:function(e){return b.apply(this,arguments)}},r.a.createElement("input",{onChange:function(e){return v.apply(this,arguments)},type:"email",value:m.email,name:"email",placeholder:"Enter email...",className:"emailInput"}),r.a.createElement("br",null),r.a.createElement("input",{onChange:function(e){return E.apply(this,arguments)},type:"password",value:m.password,name:"password",className:"passwordInput",placeholder:"Enter password..."}),r.a.createElement("input",{className:"submitForm",type:"submit",value:"Log in!"}),r.a.createElement(x.b,{className:"noAcct",to:"/signup"},"Don't have an account?"))),r.a.createElement("button",{className:"close",onClick:function(){return y.apply(this,arguments)}},"back"))))};var P=function(e){e.closePopup;var t=e.liftToken,a=Object(f.e)(),c=Object(n.useState)({name:"",email:"",password:"",message:""}),o=Object(i.a)(c,2),l=o[0],m=o[1],h=function(e){var t=e.target.name,a=e.target.value;m((function(e){return Object(s.a)({},e,Object(g.a)({},t,a))}))};function v(){return(v=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.push("/");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(K,null),r.a.createElement("section",{className:"popup"},r.a.createElement("div",{id:"signupPopup",className:"content"},r.a.createElement("div",{className:"Signup"},r.a.createElement("h3",null,"Create a new account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.a.post("/auth/signup",{name:l.name,email:l.email,password:l.password}).then((function(e){console.log(e),"error"===e.data.type?m((function(t){return Object(s.a)({},t,{name:"",email:"",password:"",message:e.data.message})})):(localStorage.setItem("mernToken",e.data.token),t(e.data),a.push("/"))}))}},r.a.createElement("input",{onChange:h,value:l.name,type:"text",name:"name",className:"nameInput",placeholder:"Enter name..."}),r.a.createElement("br",null),r.a.createElement("input",{onChange:h,value:l.email,type:"email",name:"email",className:"emailInput",placeholder:"Enter email..."}),r.a.createElement("br",null),r.a.createElement("input",{onChange:h,value:l.password,type:"password",name:"password",className:"passwordInput",placeholder:"Choose a password"}),r.a.createElement("br",null),r.a.createElement("input",{id:"signupSubmit",className:"submitForm",type:"submit",value:"Sign up"}),r.a.createElement("p",{className:"error"},l.message))),r.a.createElement("button",{className:"close",onClick:function(){return v.apply(this,arguments)}},"back"))))};var F=function(e){var t,a=e.user,n=(e.liftToken,e.closePopup,e.logout);function c(){return(c=Object(d.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("body"),a=t.className,t.className="light-mode"===a?"dark-mode":"light-mode";case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t=a?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"navTitle"},r.a.createElement("span",null,a.name,"'s")," Movie",r.a.createElement("span",{className:"titlePeriod"},"."),r.a.createElement("span",null,"DB")),r.a.createElement("div",{className:"navbuttons"},r.a.createElement("button",{className:"logout",onClick:n},"Logout"),r.a.createElement("p",{className:"userName"},"Welcome, (",a.name,")"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"navTitle"},r.a.createElement("span",null,"My "),"Movie",r.a.createElement("span",{className:"titlePeriod"},"."),r.a.createElement("span",null,"DB")),r.a.createElement("div",{className:"navbuttons"},r.a.createElement(x.b,{className:"login",to:"/login"},"Login"),r.a.createElement(x.b,{className:"signup",to:"/signup"},"Sign Up"))),r.a.createElement("nav",{className:"navbar"},r.a.createElement("input",{onChange:function(){return c.apply(this,arguments)},type:"checkbox",id:"toggle",className:"checkbox"}),r.a.createElement("label",{htmlFor:"toggle",className:"switch"}),t)};Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_KEY;var U=function(){console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_KEY);var e=Object(n.useState)({token:"",user:null,errorMessage:"",apiData:null,showLogin:!1,showSignUp:!1}),t=Object(i.a)(e,2),a=t[0],c=t[1],o=function(e){var t=e.token,a=e.user;c((function(e){return Object(s.a)({},e,{token:t,user:a})}))},l=function(){c((function(e){return Object(s.a)({},e,{showLogin:!0})}))},m=function(){c((function(e){return Object(s.a)({},e,{showLogin:!1,showSignUp:!1})})),document.getElementsByTagName("body")[0].classList.remove("noscroll")},p=r.a.createElement(f.a,{exact:!0,path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(K,{liftToken:o,user:a.user}))}});return Object(n.useEffect)((function(){!function(){var e=localStorage.getItem("mernToken");e&&"undefined"!==e?u.a.post("/auth/me/from/token",{token:e}).then((function(e){"error"===e.data.type?(localStorage.removeItem("mernToken"),c((function(t){return Object(s.a)({},t,{token:"",user:null,errorMessage:e.data.message})}))):(localStorage.setItem("mernToken",e.data.token),c((function(t){return Object(s.a)({},t,{token:e.data.token,user:e.data.user,errorMessage:""})})))})):(localStorage.removeItem("mernToken"),c((function(e){return Object(s.a)({},e,{token:"",user:null})})))}()}),[]),r.a.createElement(x.a,null,r.a.createElement(F,{onLoginClick:l,user:a.user,liftToken:o,closePopup:m,logout:function(){localStorage.removeItem("mernToken"),c((function(e){return Object(s.a)({},e,{token:"",user:null})}))}}),r.a.createElement(f.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(T,{user:a.user,liftToken:o,closePopup:m,onLoginClick:l})}}),r.a.createElement(f.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(P,{user:a.user,liftToken:o,closePopup:m})}}),p)};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))},31:function(e,t,a){e.exports=a.p+"static/media/not.88161edd.jpg"}},[[107,1,2]]]);
//# sourceMappingURL=main.2bd5f230.chunk.js.map